<!DOCTYPE html>
<title>View transitions: pagereveal event fires correctly on regular navigation</title>
<link rel="help" href="https://drafts.csswg.org/css-view-transitions-2/">
<link rel="author" href="mailto:bokan@chromium.org">
<script>
let rafFiredFirst = false;
let bfrFired = false;
requestAnimationFrame(() => {
  if (!bfrFired)
    rafFiredFirst = true;
});
addEventListener('pagereveal', () => { bfrFired = true; });
</script>
<script src="/resources/testharness.js"></script>
<script src="/resources/testharnessreport.js"></script>
<script>
promise_test(() => {
  return new Promise((resolve, reject) => {
    if (rafFiredFirst) {
      reject('`pagereveal` must fire before first rAF');
      return;
    }

    addEventListener('pagereveal', resolve);
    requestAnimationFrame(
        () => reject('`pagereveal` must fire before first rAF'));
  });
});
</script>
